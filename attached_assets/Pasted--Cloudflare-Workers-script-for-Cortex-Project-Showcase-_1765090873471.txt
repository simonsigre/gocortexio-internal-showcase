// Cloudflare Workers script for Cortex Project Showcase - Enhanced Version 2
// Modern single-file website with improved accessibility, layout, and circuit animations

addEventListener('fetch', event => {
    event.respondWith(handleRequest(event.request))
  })
  
  async function handleRequest(request) {
    if (request.method !== 'GET') {
      return new Response('Method not allowed', { status: 405 })
    }
  
    const html = `<!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GoCortex.io - Independent tools and projects for the Palo Alto Networks Cortex ecosystem">
    <title>% gocortex.io</title>
    <style>
        :root {
            --cortex-primary: #00cd67;
            --cortex-dark: #00A378;
            --cortex-light: #4DD4B0;
            --cortex-neon: #00FFB3;
            --cyber-bg: #0a0a0a;
            --cyber-surface: #111111;
            --cyber-card: #1a1a1a;
            --cyber-border: #333333;
            --cyber-text: #ffffff;
            --cyber-dim: #888888;
            --cyber-grid: #222222;
            --cortex-glow: rgba(0, 200, 150, 0.3);
            --cortex-strong-glow: rgba(0, 255, 179, 0.5);
            --cortex-shadow: rgba(0, 200, 150, 0.1);
            --focus-ring: 0 0 0 3px rgba(0, 205, 103, 0.5);
        }
  
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
  
        *:focus-visible {
            outline: 2px solid var(--cortex-primary);
            outline-offset: 2px;
        }
  
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--cyber-bg);
            color: var(--cyber-text);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
  
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(90deg, transparent 0%, var(--cyber-grid) 1px, transparent 1px),
                linear-gradient(180deg, transparent 0%, var(--cyber-grid) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.2;
            pointer-events: none;
            z-index: -1;
        }
  
        .skip-link {
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--cortex-primary);
            color: var(--cyber-bg);
            padding: 12px 24px;
            text-decoration: none;
            font-weight: 600;
            z-index: 1000;
            border-radius: 0 0 8px 8px;
            transition: top 0.3s ease;
        }
  
        .skip-link:focus {
            top: 0;
        }
  
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 clamp(16px, 4vw, 40px);
        }
  
        header {
            padding: clamp(20px, 4vw, 40px) 0;
            text-align: center;
            background: linear-gradient(180deg, var(--cyber-surface) 0%, var(--cyber-bg) 100%);
            border-bottom: 1px solid var(--cyber-border);
            position: relative;
        }
  
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--cortex-neon), transparent);
            box-shadow: 0 0 10px var(--cortex-neon);
        }
  
        header h1 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 300;
            color: var(--cyber-text);
            margin-bottom: 12px;
            text-transform: lowercase;
            font-family: 'Courier New', monospace;
            letter-spacing: 0.2em;
            white-space: nowrap;
        }
  
        @media (max-width: 480px) {
            header h1 {
                letter-spacing: 0.08em;
                font-size: clamp(1.4rem, 5vw, 1.8rem);
            }
        }
  
        header h1::before {
            content: '% ';
            color: var(--cortex-primary);
            opacity: 0.8;
        }
  
        header p {
            font-size: clamp(0.85rem, 2vw, 0.95rem);
            color: var(--cyber-dim);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
        }
  
        .disclaimer {
            font-size: 0.75rem;
            color: var(--cyber-dim);
            opacity: 0.7;
            margin-top: 8px;
        }
  
        main {
            padding: clamp(24px, 5vw, 48px) 0;
        }
  
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 520px), 1fr));
            gap: clamp(20px, 3vw, 32px);
        }
  
        .project-card {
            background: var(--cyber-card);
            border: 1px solid var(--cyber-border);
            border-radius: 4px;
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }
  
        .project-card:hover,
        .project-card:focus-within {
            border-color: var(--cortex-primary);
            box-shadow: 
                0 0 30px var(--cortex-glow),
                inset 0 0 20px rgba(0, 200, 150, 0.05);
            transform: translateY(-2px);
        }
  
        .project-visual {
            height: 280px;
            background: var(--cyber-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            border-bottom: 1px solid var(--cyber-border);
        }
  
        .media-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--cyber-surface);
        }
  
        .project-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: all 0.3s ease;
            opacity: 0;
        }
  
        .project-image.loaded {
            opacity: 1;
        }
  
        .project-image:hover {
            transform: scale(1.02);
        }
  
        .youtube-container {
            width: 100%;
            height: 100%;
            position: relative;
            cursor: pointer;
            background: var(--cyber-surface);
            display: flex;
            align-items: center;
            justify-content: center;
        }
  
        .youtube-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.3s ease;
            filter: brightness(0.7);
        }
  
        .youtube-thumbnail:hover {
            filter: brightness(0.9);
        }
  
        .youtube-play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 56px;
            height: 56px;
            background: rgba(255, 0, 0, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.4);
        }
  
        .youtube-play-button::before {
            content: '';
            width: 0;
            height: 0;
            border-left: 18px solid white;
            border-top: 11px solid transparent;
            border-bottom: 11px solid transparent;
            margin-left: 4px;
        }
  
        .youtube-container:hover .youtube-play-button {
            transform: translate(-50%, -50%) scale(1.1);
        }
  
        .project-visual.fallback {
            background: linear-gradient(135deg, var(--cyber-surface) 0%, var(--cyber-card) 100%);
        }
  
        .project-visual.fallback::before {
            content: '';
            position: absolute;
            width: 80px;
            height: 80px;
            border: 2px solid var(--cortex-primary);
            opacity: 0.3;
            animation: fallbackPulse 4s ease-in-out infinite;
        }
  
        .project-visual.fallback.lang-rust::before {
            clip-path: polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%);
            border-color: #ce422b;
        }
  
        .project-visual.fallback.lang-python::before {
            border-radius: 50%;
            border-color: #3776ab;
        }
  
        .project-visual.fallback.lang-typescript::before {
            clip-path: polygon(15% 0%, 85% 0%, 100% 15%, 100% 85%, 85% 100%, 15% 100%, 0% 85%, 0% 15%);
            border-color: #3178c6;
        }
  
        @keyframes fallbackPulse {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.3; }
            50% { transform: scale(1.1) rotate(180deg); opacity: 0.5; }
        }
  
        .media-loading {
            width: 32px;
            height: 32px;
            border: 2px solid var(--cyber-border);
            border-top-color: var(--cortex-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
  
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
  
        .project-content {
            padding: clamp(16px, 3vw, 24px);
            display: flex;
            flex-direction: column;
            flex: 1;
        }
  
        .project-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 12px;
        }
  
        .project-title {
            font-size: clamp(1rem, 2vw, 1.15rem);
            font-weight: 600;
            color: var(--cyber-text);
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
  
        .project-version {
            font-size: 0.75rem;
            font-weight: 400;
            margin-left: 8px;
        }
  
        .version-tag {
            background: var(--cortex-primary);
            color: var(--cyber-bg);
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
        }
  
        .release-date {
            color: var(--cortex-primary);
            margin-left: 4px;
            font-weight: 600;
        }
  
        .project-status {
            padding: 4px 8px;
            border: 1px solid;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-family: 'Courier New', monospace;
            white-space: nowrap;
            flex-shrink: 0;
        }
  
        .status-active {
            border-color: var(--cortex-primary);
            color: var(--cortex-primary);
            background: rgba(0, 200, 150, 0.1);
        }
  
        .status-development {
            border-color: #ff6b35;
            color: #ff6b35;
            background: rgba(255, 107, 53, 0.1);
        }
  
        .status-beta {
            border-color: #00d4ff;
            color: #00d4ff;
            background: rgba(0, 212, 255, 0.1);
        }
  
        .project-description {
            color: var(--cyber-dim);
            margin-bottom: 16px;
            line-height: 1.6;
            font-size: 0.9rem;
            flex-grow: 1;
        }
  
        .description-text {
            overflow: hidden;
            transition: max-height 0.4s ease;
        }
  
        .description-text.collapsed {
            max-height: 4.8em;
            position: relative;
        }
  
        .description-text.collapsed::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1.5em;
            background: linear-gradient(transparent, var(--cyber-card));
        }
  
        .description-text.expanded {
            max-height: none;
        }
  
        .read-more-btn {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: transparent;
            border: 1px solid var(--cortex-primary);
            color: var(--cortex-primary);
            padding: 6px 12px;
            font-size: 0.75rem;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 8px;
            min-height: 32px;
        }
  
        .read-more-btn:hover {
            background: var(--cortex-primary);
            color: var(--cyber-bg);
        }
  
        .read-more-btn .btn-icon {
            transition: transform 0.3s ease;
            font-size: 0.6rem;
        }
  
        .read-more-btn.expanded .btn-icon {
            transform: rotate(180deg);
        }
  
        .project-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 12px;
            border-top: 1px solid var(--cyber-border);
            padding-top: 16px;
            margin-top: auto;
        }
  
        .project-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: transparent;
            color: var(--cortex-primary);
            text-decoration: none;
            border: 1px solid var(--cortex-primary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
        }
  
        .project-link:hover,
        .project-link:focus {
            background: var(--cortex-primary);
            color: var(--cyber-bg);
            box-shadow: 0 0 20px var(--cortex-glow);
        }
  
        .project-meta {
            display: flex;
            gap: 12px;
            color: var(--cyber-dim);
            font-size: 0.8rem;
        }
  
        .meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
  
        .language-breakdown {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 4px;
        }
  
        .lang-item {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.75rem;
            color: var(--cyber-dim);
        }
  
        .lang-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
        }
  
        .lang-name {
            color: var(--cyber-text);
            font-weight: 500;
        }
  
        .lang-percent {
            color: var(--cyber-dim);
        }
  
        .loading-state {
            text-align: center;
            padding: 48px 20px;
            color: var(--cyber-dim);
        }
  
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 2px solid var(--cyber-border);
            border-top-color: var(--cortex-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }
  
        /* ========================================
           ENHANCED CIRCUIT BOARD ANIMATION SYSTEM
           ======================================== */
        .circuit-container {
            position: fixed;
            top: 0;
            height: 100vh;
            width: 200px;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }
  
        .circuit-left { left: 0; }
        .circuit-right { right: 0; }
  
        @media (max-width: 1600px) {
            .circuit-container { width: 120px; }
        }
  
        @media (max-width: 1400px) {
            .circuit-container { display: none; }
        }
  
        .circuit-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
  
        .circuit-trace {
            fill: none;
            stroke: var(--cyber-border);
            stroke-width: 1;
            opacity: 0.15;
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: all 0.6s ease-out;
        }
  
        .circuit-trace.active {
            stroke: var(--cortex-primary);
            opacity: 0.4;
            filter: drop-shadow(0 0 3px var(--cortex-glow));
        }
  
        .circuit-trace.active.glow {
            opacity: 0.7;
            stroke-width: 2;
            filter: drop-shadow(0 0 8px var(--cortex-neon));
        }
  
        .circuit-node {
            fill: transparent;
            stroke: var(--cyber-border);
            stroke-width: 1;
            opacity: 0.2;
            transition: all 0.4s ease-out;
        }
  
        .circuit-node.active {
            fill: var(--cortex-primary);
            stroke: var(--cortex-neon);
            opacity: 0.6;
            filter: drop-shadow(0 0 6px var(--cortex-neon));
        }
  
        .circuit-node.active.pulse {
            animation: nodePulseAnim 1.5s ease-out;
        }
  
        @keyframes nodePulseAnim {
            0% { r: 3; opacity: 1; filter: drop-shadow(0 0 15px var(--cortex-neon)); }
            100% { r: 3; opacity: 0.6; filter: drop-shadow(0 0 6px var(--cortex-neon)); }
        }
  
        .data-packet {
            fill: var(--cortex-neon);
            opacity: 0;
            filter: drop-shadow(0 0 4px var(--cortex-neon));
        }
  
        .data-packet.flowing {
            opacity: 0.9;
        }
  
        .circuit-glow-line {
            fill: none;
            stroke: url(#glowGradient);
            stroke-width: 3;
            opacity: 0;
            stroke-linecap: round;
        }
  
        .circuit-glow-line.active {
            opacity: 0.6;
            animation: glowPulse 2s ease-in-out infinite;
        }
  
        @keyframes glowPulse {
            0%, 100% { opacity: 0.4; stroke-width: 2; }
            50% { opacity: 0.8; stroke-width: 4; }
        }
  
        .circuit-chip {
            fill: var(--cyber-surface);
            stroke: var(--cyber-border);
            stroke-width: 1;
            opacity: 0.3;
            transition: all 0.5s ease-out;
        }
  
        .circuit-chip.active {
            fill: var(--cyber-card);
            stroke: var(--cortex-primary);
            opacity: 0.7;
            filter: drop-shadow(0 0 8px var(--cortex-glow));
        }
  
        .circuit-chip-pin {
            fill: var(--cyber-border);
            opacity: 0.3;
            transition: all 0.3s ease-out;
        }
  
        .circuit-chip-pin.active {
            fill: var(--cortex-primary);
            opacity: 0.8;
        }
  
        .energy-wave {
            fill: none;
            stroke: var(--cortex-neon);
            stroke-width: 1;
            opacity: 0;
        }
  
        .energy-wave.active {
            animation: energyWaveAnim 3s ease-out infinite;
        }
  
        @keyframes energyWaveAnim {
            0% { opacity: 0; stroke-dashoffset: 100; }
            20% { opacity: 0.6; }
            100% { opacity: 0; stroke-dashoffset: 0; }
        }
  
        .scroll-indicator {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 0%;
            background: linear-gradient(to bottom, transparent, var(--cortex-primary), transparent);
            opacity: 0.3;
            transition: height 0.3s ease-out;
            z-index: 0;
            top: 0;
        }
  
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .projects-grid {
                grid-template-columns: 1fr;
            }
  
            .project-visual {
                height: 220px;
            }
  
            .project-header {
                flex-direction: column;
                align-items: flex-start;
            }
  
            .project-footer {
                flex-direction: column;
                align-items: stretch;
            }
  
            .project-link {
                justify-content: center;
            }
  
            .read-more-btn {
                min-height: 40px;
                padding: 10px 16px;
            }
        }
  
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
  
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
  </head>
  <body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
  
    <!-- Enhanced Circuit Board Animation - Left Side -->
    <div class="circuit-container circuit-left" id="circuit-left" aria-hidden="true">
        <svg class="circuit-svg" viewBox="0 0 200 1000" preserveAspectRatio="xMidYMid slice">
            <defs>
                <linearGradient id="glowGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#00FFB3;stop-opacity:0"/>
                    <stop offset="50%" style="stop-color:#00FFB3;stop-opacity:1"/>
                    <stop offset="100%" style="stop-color:#00FFB3;stop-opacity:0"/>
                </linearGradient>
                <filter id="glow">
                    <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                    <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
            </defs>
            <!-- Main backbone traces -->
            <path class="circuit-trace backbone" d="M50 0 L50 1000"/>
            <path class="circuit-trace backbone" d="M100 0 L100 1000"/>
            <path class="circuit-trace backbone" d="M150 0 L150 1000"/>
            
            <!-- Horizontal connectors - will be activated progressively -->
            <path class="circuit-trace h-trace" data-level="1" d="M30 80 L170 80"/>
            <path class="circuit-trace h-trace" data-level="2" d="M30 160 L120 160"/>
            <path class="circuit-trace h-trace" data-level="3" d="M80 240 L170 240"/>
            <path class="circuit-trace h-trace" data-level="4" d="M30 320 L170 320"/>
            <path class="circuit-trace h-trace" data-level="5" d="M50 400 L150 400"/>
            <path class="circuit-trace h-trace" data-level="6" d="M30 480 L170 480"/>
            <path class="circuit-trace h-trace" data-level="7" d="M60 560 L140 560"/>
            <path class="circuit-trace h-trace" data-level="8" d="M30 640 L170 640"/>
            <path class="circuit-trace h-trace" data-level="9" d="M40 720 L160 720"/>
            <path class="circuit-trace h-trace" data-level="10" d="M30 800 L170 800"/>
            <path class="circuit-trace h-trace" data-level="11" d="M50 880 L150 880"/>
            <path class="circuit-trace h-trace" data-level="12" d="M30 960 L170 960"/>
            
            <!-- Diagonal connections -->
            <path class="circuit-trace d-trace" data-level="2" d="M50 160 L100 200"/>
            <path class="circuit-trace d-trace" data-level="4" d="M100 320 L150 360"/>
            <path class="circuit-trace d-trace" data-level="6" d="M150 480 L100 520"/>
            <path class="circuit-trace d-trace" data-level="8" d="M50 640 L100 680"/>
            <path class="circuit-trace d-trace" data-level="10" d="M100 800 L50 840"/>
            
            <!-- Circuit nodes -->
            <circle class="circuit-node" data-level="1" cx="50" cy="80" r="3"/>
            <circle class="circuit-node" data-level="1" cx="100" cy="80" r="3"/>
            <circle class="circuit-node" data-level="2" cx="100" cy="160" r="3"/>
            <circle class="circuit-node" data-level="3" cx="150" cy="240" r="3"/>
            <circle class="circuit-node" data-level="4" cx="50" cy="320" r="3"/>
            <circle class="circuit-node" data-level="4" cx="150" cy="320" r="3"/>
            <circle class="circuit-node" data-level="5" cx="100" cy="400" r="3"/>
            <circle class="circuit-node" data-level="6" cx="50" cy="480" r="3"/>
            <circle class="circuit-node" data-level="7" cx="100" cy="560" r="3"/>
            <circle class="circuit-node" data-level="8" cx="150" cy="640" r="3"/>
            <circle class="circuit-node" data-level="9" cx="50" cy="720" r="3"/>
            <circle class="circuit-node" data-level="10" cx="100" cy="800" r="3"/>
            <circle class="circuit-node" data-level="11" cx="150" cy="880" r="3"/>
            
            <!-- IC Chips -->
            <rect class="circuit-chip" data-level="3" x="70" y="220" width="40" height="30" rx="2"/>
            <rect class="circuit-chip-pin" data-level="3" x="75" y="215" width="4" height="5"/>
            <rect class="circuit-chip-pin" data-level="3" x="85" y="215" width="4" height="5"/>
            <rect class="circuit-chip-pin" data-level="3" x="95" y="215" width="4" height="5"/>
            <rect class="circuit-chip-pin" data-level="3" x="75" y="250" width="4" height="5"/>
            <rect class="circuit-chip-pin" data-level="3" x="85" y="250" width="4" height="5"/>
            <rect class="circuit-chip-pin" data-level="3" x="95" y="250" width="4" height="5"/>
            
            <rect class="circuit-chip" data-level="7" x="55" y="540" width="50" height="35" rx="2"/>
            <rect class="circuit-chip-pin" data-level="7" x="60" y="535" width="4" height="5"/>
            <rect class="circuit-chip-pin" data-level="7" x="72" y="535" width="4" height="5"/>
            <rect class="circuit-chip-pin" data-level="7" x="84" y="535" width="4" height="5"/>
            <rect class="circuit-chip-pin" data-level="7" x="96" y="535" width="4" height="5"/>
            
            <!-- Data flow particles -->
            <circle class="data-packet" data-path="backbone1" cx="50" cy="0" r="2"/>
            <circle class="data-packet" data-path="backbone2" cx="100" cy="0" r="2"/>
            <circle class="data-packet" data-path="backbone3" cx="150" cy="0" r="2"/>
            
            <!-- Energy waves -->
            <circle class="energy-wave" cx="100" cy="400" r="20" stroke-dasharray="10 5"/>
            <circle class="energy-wave" cx="80" cy="560" r="25" stroke-dasharray="8 4"/>
        </svg>
    </div>
  
    <!-- Enhanced Circuit Board Animation - Right Side (mirrored) -->
    <div class="circuit-container circuit-right" id="circuit-right" aria-hidden="true">
        <svg class="circuit-svg" viewBox="0 0 200 1000" preserveAspectRatio="xMidYMid slice" style="transform: scaleX(-1);">
            <defs>
                <linearGradient id="glowGradient2" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#00FFB3;stop-opacity:0"/>
                    <stop offset="50%" style="stop-color:#00FFB3;stop-opacity:1"/>
                    <stop offset="100%" style="stop-color:#00FFB3;stop-opacity:0"/>
                </linearGradient>
            </defs>
            <!-- Main backbone traces -->
            <path class="circuit-trace backbone" d="M50 0 L50 1000"/>
            <path class="circuit-trace backbone" d="M100 0 L100 1000"/>
            <path class="circuit-trace backbone" d="M150 0 L150 1000"/>
            
            <!-- Horizontal connectors -->
            <path class="circuit-trace h-trace" data-level="1" d="M30 100 L170 100"/>
            <path class="circuit-trace h-trace" data-level="2" d="M50 180 L130 180"/>
            <path class="circuit-trace h-trace" data-level="3" d="M30 260 L170 260"/>
            <path class="circuit-trace h-trace" data-level="4" d="M70 340 L150 340"/>
            <path class="circuit-trace h-trace" data-level="5" d="M30 420 L170 420"/>
            <path class="circuit-trace h-trace" data-level="6" d="M50 500 L140 500"/>
            <path class="circuit-trace h-trace" data-level="7" d="M30 580 L170 580"/>
            <path class="circuit-trace h-trace" data-level="8" d="M60 660 L160 660"/>
            <path class="circuit-trace h-trace" data-level="9" d="M30 740 L170 740"/>
            <path class="circuit-trace h-trace" data-level="10" d="M40 820 L150 820"/>
            <path class="circuit-trace h-trace" data-level="11" d="M30 900 L170 900"/>
            
            <!-- Diagonal connections -->
            <path class="circuit-trace d-trace" data-level="1" d="M100 100 L150 140"/>
            <path class="circuit-trace d-trace" data-level="3" d="M50 260 L100 300"/>
            <path class="circuit-trace d-trace" data-level="5" d="M150 420 L100 460"/>
            <path class="circuit-trace d-trace" data-level="7" d="M50 580 L100 620"/>
            <path class="circuit-trace d-trace" data-level="9" d="M100 740 L150 780"/>
            
            <!-- Circuit nodes -->
            <circle class="circuit-node" data-level="1" cx="100" cy="100" r="3"/>
            <circle class="circuit-node" data-level="2" cx="50" cy="180" r="3"/>
            <circle class="circuit-node" data-level="3" cx="150" cy="260" r="3"/>
            <circle class="circuit-node" data-level="4" cx="100" cy="340" r="3"/>
            <circle class="circuit-node" data-level="5" cx="50" cy="420" r="3"/>
            <circle class="circuit-node" data-level="5" cx="150" cy="420" r="3"/>
            <circle class="circuit-node" data-level="6" cx="100" cy="500" r="3"/>
            <circle class="circuit-node" data-level="7" cx="50" cy="580" r="3"/>
            <circle class="circuit-node" data-level="8" cx="150" cy="660" r="3"/>
            <circle class="circuit-node" data-level="9" cx="100" cy="740" r="3"/>
            <circle class="circuit-node" data-level="10" cx="50" cy="820" r="3"/>
            <circle class="circuit-node" data-level="11" cx="100" cy="900" r="3"/>
            
            <!-- IC Chip -->
            <rect class="circuit-chip" data-level="5" x="55" y="400" width="45" height="30" rx="2"/>
            <rect class="circuit-chip-pin" data-level="5" x="60" y="395" width="4" height="5"/>
            <rect class="circuit-chip-pin" data-level="5" x="75" y="395" width="4" height="5"/>
            <rect class="circuit-chip-pin" data-level="5" x="90" y="395" width="4" height="5"/>
            
            <rect class="circuit-chip" data-level="9" x="70" y="720" width="40" height="30" rx="2"/>
            
            <!-- Data flow particles -->
            <circle class="data-packet" data-path="backbone1" cx="50" cy="0" r="2"/>
            <circle class="data-packet" data-path="backbone2" cx="100" cy="0" r="2"/>
            
            <!-- Energy waves -->
            <circle class="energy-wave" cx="100" cy="420" r="20" stroke-dasharray="10 5"/>
        </svg>
    </div>
  
    <!-- Scroll Progress Indicator -->
    <div class="scroll-indicator" id="scrollIndicator" aria-hidden="true"></div>
  
    <header role="banner">
        <div class="container">
            <h1>g o c o r t e x . i o</h1>
            <p>Independent tools, projects, and ideas to complement and extend the Palo Alto Networks Cortex ecosystem.</p>
            <p class="disclaimer">GoCortex.io is independently operated and is in no way endorsed or supported by Palo Alto Networks.</p>
        </div>
    </header>
  
    <main id="main-content" role="main">
        <div class="container">
            <div class="projects-grid" id="projectsGrid" role="list" aria-label="Project showcase">
                <!-- Projects will be dynamically loaded here -->
            </div>
            <div class="loading-state" id="loadingState" aria-live="polite">
                <div class="loading-spinner" aria-hidden="true"></div>
                <p>Loading project information...</p>
            </div>
        </div>
    </main>
  
    <script>
        // Project data
        const projects = [
            {
                name: "XDRTop",
                description: "A high-performance Rust CLI monitoring tool for Cortex XSIAM, CLOUD and XDR, delivering real-time, interactive case tracking with advanced terminal-based visualisation and comprehensive filtering capabilities.",
                status: "active",
                link: "https://github.com/gocortexio/xdrtop/releases/latest",
                language: "Rust",
                repo: "gocortexio/xdrtop",
                githubApi: true,
                media: {
                    type: "image",
                    url: "https://raw.githubusercontent.com/gocortexio/xdrtop/main/assets/xdrtop-logo.png",
                    alt: "XDRTop terminal demo showing real-time case monitoring"
                }
            },
            {
                name: "MockTAXII",
                description: "A comprehensive TAXII 2.x server designed for testing XSIAM and XSOAR Threat Intelligence Management (TIM). MockTAXII offers a complete STIX/TAXII 2.1 implementation, generating realistic indicators, campaigns and reports, all with rich, interlinked relationships.",
                status: "active",
                link: "https://github.com/gocortexio/mocktaxii/releases/latest",
                language: "Python",
                repo: "gocortexio/mocktaxii",
                githubApi: true,
                media: {
                    type: "image",
                    url: "https://raw.githubusercontent.com/gocortexio/mocktaxii/refs/heads/main/static/mocktaxii-logo.png",
                    alt: "MockTAXII logo"
                }
            },
            {
                name: "SignalBench",
                description: "A Rust-based application for Linux that generates endpoint telemetry aligned with MITRE ATT&CK techniques for security analytics, research, and training environments. SignalBench allows security professionals to generate realistic endpoint telemetry patterns.",
                status: "active",
                link: "https://github.com/gocortexio/signalbench/releases/latest",
                language: "Rust",
                repo: "gocortexio/signalbench",
                githubApi: true,
                media: {
                    type: "image",
                    url: "https://raw.githubusercontent.com/gocortexio/signalbench/refs/heads/main/assets/signalbench-logo-baby.png",
                    alt: "SignalBench logo"
                }
            },
            {
                name: "Snellen for Containers",
                description: "A web-based platform for running simulated cyber attacks in containerised environments. It automatically downloads and manages the Rust-based Snellen CLI, so no manual setup or terminal access is required.",
                status: "development",
                link: "https://github.com/simonsigre/snellen-for-containers",
                language: "TypeScript"
            },
            {
                name: "GCGit",
                description: "Go Cortex Git is a Rust-based CLI tool designed to serve as a lightweight abstraction layer between local Git operations and the Cortex XSIAM REST API. It enables security teams to version-control and deploy XSIAM configuration objects.",
                status: "active",
                link: "https://github.com/gocortexio/gcgit/releases/latest",
                language: "Rust",
                repo: "gocortexio/gcgit",
                githubApi: true,
                media: {
                    type: "image",
                    url: "https://raw.githubusercontent.com/gocortexio/gcgit/main/assets/gcgit-logo.png",
                    alt: "GCGit Logo"
                }
            },
            {
                name: "AckbarX",
                description: "A robust Rust-based SNMP trap forwarder designed to reliably capture SNMP v1/v2c/v3 traps from multiple ports and hosts and securely forward them to Cortex XSIAM HTTP endpoints.",
                status: "active",
                link: "https://github.com/gocortexio/ackbarx/releases/latest",
                language: "Rust",
                repo: "gocortexio/ackbarx",
                githubApi: true,
                media: {
                    type: "image",
                    url: "https://raw.githubusercontent.com/gocortexio/ackbarx/main/assets/ackbarx-trap-logo.png",
                    alt: "AckbarX SNMP trap forwarding architecture"
                }
            },
            {
                name: "GoCortex Broken Bank",
                description: "An intentionally vulnerable application designed to support Palo Alto Networks Cortex Cloud and XSIAM/XDR training. Features a wide range of deliberately implemented security vulnerabilities for assessment and testing.",
                status: "active",
                link: "https://github.com/gocortexio/gocortexbrokenbank/releases/latest",
                language: "Python",
                repo: "gocortexio/gocortexbrokenbank",
                githubApi: true,
                media: {
                    type: "image",
                    url: "https://raw.githubusercontent.com/gocortexio/gocortexbrokenbank/main/static/images/brokenbank-logo.png",
                    alt: "Broken Bank title logo"
                }
            },
            {
                name: "sigma2xsiam",
                description: "A custom pySigma backend specifically designed to convert Sigma rules into functional and accurate Cortex XSIAM XQL queries. Bridges the gap left by the standard pysigma-backend-cortexxdr.",
                status: "active",
                link: "https://github.com/gocortexio/sigma2xsiam/releases",
                language: "Python",
                repo: "gocortexio/sigma2xsiam",
                githubApi: true
            },
            {
                name: "PyGremlinBox",
                description: "A comprehensive container project housing multiple Python modules for supply chain security testing. Each subproject contains different policy implementations that trigger alerts in dependency scanning tools.",
                status: "active",
                link: "https://github.com/gocortexio/pygremlinbox/releases",
                language: "Python",
                repo: "gocortexio/pygremlinbox",
                githubApi: true,
                media: {
                    type: "image",
                    url: "https://github.com/gocortexio/pygremlinbox/blob/main/assets/pygremlinbox-logo.png?raw=true",
                    alt: "Python Gremlin in a box"
                }
            }
        ];
  
        const statusClasses = {
            'active': 'status-active',
            'development': 'status-development', 
            'beta': 'status-beta',
            'archived': 'status-archived'
        };
  
        function formatStatus(status) {
            const statusMap = {
                'active': 'Active',
                'development': 'In Development',
                'beta': 'Beta',
                'archived': 'Archived'
            };
            return statusMap[status] || status;
        }
  
        const fallbackVersions = {
            'gocortexio/xdrtop': { tag_name: 'v1.0.35', published_at: '2025-08-22T10:55:29Z' },
            'gocortexio/mocktaxii': { tag_name: 'v0.5.2', published_at: '2025-08-21T11:06:26Z' },
            'gocortexio/signalbench': { tag_name: 'v1.0.0', published_at: '2025-08-20T14:30:00Z' },
            'gocortexio/gcgit': { tag_name: 'v0.2.1', published_at: '2025-08-19T09:15:00Z' },
            'gocortexio/ackbarx': { tag_name: 'v1.1.0', published_at: '2025-08-18T16:45:00Z' },
            'gocortexio/sigma2xsiam': { tag_name: 'v1.0.0', published_at: '2025-09-13T12:00:00Z' },
            'gocortexio/pygremlinbox': { tag_name: 'v1.0.0', published_at: '2025-09-15T09:00:00Z' },
            'gocortexio/gocortexbrokenbank': { tag_name: 'v1.0.0', published_at: '2025-09-10T08:00:00Z' }
        };
  
        async function fetchGitHubReleaseData(repo) {
            try {
                const response = await fetch('https://api.github.com/repos/' + repo + '/releases/latest');
                if (response.ok) {
                    return await response.json();
                }
                return fallbackVersions[repo] || null;
            } catch (error) {
                return fallbackVersions[repo] || null;
            }
        }
  
        const languageColors = {
            'Rust': '#dea584',
            'Python': '#3572A5',
            'TypeScript': '#3178c6',
            'JavaScript': '#f1e05a',
            'Shell': '#89e051',
            'HTML': '#e34c26',
            'CSS': '#563d7c',
            'Go': '#00ADD8',
            'Dockerfile': '#384d54',
            'Makefile': '#427819',
            'TOML': '#9c4221',
            'Jinja': '#a52a22'
        };
  
        async function fetchGitHubLanguages(repo) {
            try {
                const response = await fetch('https://api.github.com/repos/' + repo + '/languages');
                if (response.ok) {
                    const languages = await response.json();
                    const total = Object.values(languages).reduce((sum, bytes) => sum + bytes, 0);
                    if (total === 0) return null;
                    
                    const breakdown = Object.entries(languages)
                        .map(([name, bytes]) => ({
                            name,
                            bytes,
                            percentage: Math.round((bytes / total) * 100)
                        }))
                        .filter(lang => lang.percentage >= 1)
                        .sort((a, b) => b.percentage - a.percentage)
                        .slice(0, 4);
                    
                    return breakdown;
                }
                return null;
            } catch (error) {
                return null;
            }
        }
  
        async function loadProjectMedia(project) {
            const mediaContainer = document.createElement('div');
            mediaContainer.className = 'media-container';
  
            if (!project.media) {
                return await createFallbackIcon(project);
            }
  
            const loadingElement = document.createElement('div');
            loadingElement.className = 'media-loading';
            loadingElement.setAttribute('aria-label', 'Loading media');
            mediaContainer.appendChild(loadingElement);
  
            try {
                if (project.media.type === 'image') {
                    const imageElement = await loadProjectImage(project.media);
                    mediaContainer.removeChild(loadingElement);
                    mediaContainer.appendChild(imageElement);
                } else if (project.media.type === 'youtube') {
                    const youtubeElement = await loadYouTubeEmbed(project.media);
                    mediaContainer.removeChild(loadingElement);
                    mediaContainer.appendChild(youtubeElement);
                } else {
                    throw new Error('Unknown media type');
                }
            } catch (error) {
                mediaContainer.removeChild(loadingElement);
                const fallbackElement = await createFallbackIcon(project);
                mediaContainer.appendChild(fallbackElement);
            }
  
            return mediaContainer;
        }
  
        async function loadProjectImage(media) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                const timeout = setTimeout(() => reject(new Error('Image load timeout')), 10000);
  
                img.onload = () => {
                    clearTimeout(timeout);
                    img.className = 'project-image loaded';
                    img.alt = media.alt || 'Project screenshot';
                    img.loading = 'lazy';
                    resolve(img);
                };
  
                img.onerror = () => {
                    clearTimeout(timeout);
                    reject(new Error('Image failed to load'));
                };
  
                img.className = 'project-image';
                img.src = media.url;
            });
        }
  
        async function loadYouTubeEmbed(media) {
            return new Promise((resolve, reject) => {
                const container = document.createElement('div');
                container.className = 'youtube-container';
                container.setAttribute('role', 'button');
                container.setAttribute('tabindex', '0');
                container.setAttribute('aria-label', 'Play YouTube video: ' + (media.title || 'Project demo'));
  
                const thumbnail = new Image();
                const timeout = setTimeout(() => reject(new Error('YouTube thumbnail timeout')), 8000);
  
                thumbnail.onload = () => {
                    clearTimeout(timeout);
                    thumbnail.className = 'youtube-thumbnail';
                    thumbnail.alt = '';
  
                    const playButton = document.createElement('div');
                    playButton.className = 'youtube-play-button';
                    playButton.setAttribute('aria-hidden', 'true');
  
                    const openVideo = () => {
                        window.open('https://www.youtube.com/watch?v=' + media.videoId, '_blank');
                    };
  
                    container.addEventListener('click', openVideo);
                    container.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            openVideo();
                        }
                    });
  
                    container.appendChild(thumbnail);
                    container.appendChild(playButton);
                    resolve(container);
                };
  
                thumbnail.onerror = () => {
                    clearTimeout(timeout);
                    reject(new Error('YouTube thumbnail failed'));
                };
  
                thumbnail.src = media.thumbnailUrl || 'https://img.youtube.com/vi/' + media.videoId + '/maxresdefault.jpg';
            });
        }
  
        async function createFallbackIcon(project) {
            const fallbackContainer = document.createElement('div');
            fallbackContainer.className = 'project-visual fallback';
            fallbackContainer.setAttribute('aria-hidden', 'true');
  
            if (project.language) {
                fallbackContainer.classList.add('lang-' + project.language.toLowerCase());
            }
  
            return fallbackContainer;
        }
  
        function formatReleaseDate(dateString) {
            if (!dateString) return '';
            try {
                const date = new Date(dateString);
                return date.toISOString().split('T')[0];
            } catch (error) {
                return '';
            }
        }
  
        function formatVersionTag(tagName) {
            if (!tagName) return '';
            return tagName.replace(/^V/, 'v');
        }
  
        function truncateToSentences(text, sentenceCount = 2) {
            if (!text) return '';
            const sentences = text.match(/[^.!?]+[.!?]+/g) || [text];
            if (sentences.length <= sentenceCount) return text;
            return sentences.slice(0, sentenceCount).join(' ').trim();
        }
  
        function createExpandableDescription(description) {
            const descriptionContainer = document.createElement('div');
            descriptionContainer.className = 'project-description';
  
            const truncatedText = truncateToSentences(description, 2);
            const needsExpansion = truncatedText !== description;
  
            if (!needsExpansion) {
                descriptionContainer.innerHTML = '<div class="description-text expanded">' + description + '</div>';
                return descriptionContainer;
            }
  
            const textContainer = document.createElement('div');
            textContainer.className = 'description-text collapsed';
            textContainer.innerHTML = description;
  
            const readMoreBtn = document.createElement('button');
            readMoreBtn.className = 'read-more-btn';
            readMoreBtn.innerHTML = '<span class="btn-text">Read More</span><span class="btn-icon" aria-hidden="true">▼</span>';
            readMoreBtn.setAttribute('aria-expanded', 'false');
  
            readMoreBtn.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
  
                const isExpanded = textContainer.classList.contains('expanded');
  
                if (isExpanded) {
                    textContainer.classList.remove('expanded');
                    textContainer.classList.add('collapsed');
                    readMoreBtn.innerHTML = '<span class="btn-text">Read More</span><span class="btn-icon" aria-hidden="true">▼</span>';
                    readMoreBtn.classList.remove('expanded');
                    readMoreBtn.setAttribute('aria-expanded', 'false');
                } else {
                    textContainer.classList.remove('collapsed');
                    textContainer.classList.add('expanded');
                    readMoreBtn.innerHTML = '<span class="btn-text">Read Less</span><span class="btn-icon" aria-hidden="true">▲</span>';
                    readMoreBtn.classList.add('expanded');
                    readMoreBtn.setAttribute('aria-expanded', 'true');
                }
            });
  
            descriptionContainer.appendChild(textContainer);
            descriptionContainer.appendChild(readMoreBtn);
  
            return descriptionContainer;
        }
  
        async function createProjectCard(project, releaseData = null, languagesData = null) {
            const cardContainer = document.createElement('article');
            cardContainer.className = 'project-card';
            cardContainer.setAttribute('role', 'listitem');
  
            const projectVisual = document.createElement('div');
            projectVisual.className = 'project-visual';
  
            try {
                const mediaContainer = await loadProjectMedia(project);
                projectVisual.appendChild(mediaContainer);
            } catch (error) {
                const fallbackContainer = await createFallbackIcon(project);
                projectVisual.appendChild(fallbackContainer);
            }
  
            const projectContent = document.createElement('div');
            projectContent.className = 'project-content';
  
            const projectHeader = document.createElement('div');
            projectHeader.className = 'project-header';
  
            const titleContainer = document.createElement('div');
            const titleElement = document.createElement('h2');
            titleElement.className = 'project-title';
            titleElement.textContent = project.name;
  
            if (releaseData) {
                const releaseDate = formatReleaseDate(releaseData.published_at);
                const versionTag = formatVersionTag(releaseData.tag_name);
  
                const versionContainer = document.createElement('span');
                versionContainer.className = 'project-version';
  
                const versionTagElement = document.createElement('span');
                versionTagElement.className = 'version-tag';
                versionTagElement.textContent = versionTag;
                versionContainer.appendChild(versionTagElement);
  
                if (releaseDate) {
                    const releaseDateElement = document.createElement('span');
                    releaseDateElement.className = 'release-date';
                    releaseDateElement.textContent = ' • ' + releaseDate;
                    versionContainer.appendChild(releaseDateElement);
                }
  
                titleElement.appendChild(document.createTextNode(' '));
                titleElement.appendChild(versionContainer);
            }
  
            titleContainer.appendChild(titleElement);
  
            const statusElement = document.createElement('span');
            statusElement.className = 'project-status ' + (statusClasses[project.status] || 'status-active');
            statusElement.textContent = formatStatus(project.status);
  
            projectHeader.appendChild(titleContainer);
            projectHeader.appendChild(statusElement);
  
            const descriptionElement = createExpandableDescription(project.description);
  
            const projectFooter = document.createElement('div');
            projectFooter.className = 'project-footer';
  
            const projectLink = document.createElement('a');
            projectLink.href = project.link;
            projectLink.className = 'project-link';
            projectLink.target = '_blank';
            projectLink.rel = 'noopener noreferrer';
            projectLink.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
            projectLink.innerHTML += '<span>View Project</span>';
  
            const projectMeta = document.createElement('div');
            projectMeta.className = 'project-meta';
  
            if (languagesData && languagesData.length > 0) {
                const langBreakdown = document.createElement('div');
                langBreakdown.className = 'language-breakdown';
                
                languagesData.forEach(lang => {
                    const langItem = document.createElement('span');
                    langItem.className = 'lang-item';
                    const color = languageColors[lang.name] || '#888888';
                    langItem.innerHTML = '<span class="lang-dot" style="background-color: ' + color + ';"></span>' +
                        '<span class="lang-name">' + lang.name + '</span>' +
                        '<span class="lang-percent">' + lang.percentage + '%</span>';
                    langBreakdown.appendChild(langItem);
                });
                
                projectMeta.appendChild(langBreakdown);
            } else {
                projectMeta.innerHTML = '<span class="meta-item"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="3" fill="currentColor"/><path d="M12 1v6m0 6v6m11-7h-6m-6 0H1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>' + project.language + '</span>';
            }
  
            projectFooter.appendChild(projectLink);
            projectFooter.appendChild(projectMeta);
  
            projectContent.appendChild(projectHeader);
            projectContent.appendChild(descriptionElement);
            projectContent.appendChild(projectFooter);
  
            cardContainer.appendChild(projectVisual);
            cardContainer.appendChild(projectContent);
  
            return cardContainer;
        }
  
        async function loadProjects() {
            const projectsGrid = document.getElementById('projectsGrid');
            const loadingState = document.getElementById('loadingState');
  
            try {
                if (projects.length === 0) {
                    throw new Error('No projects configured');
                }
  
                const githubPromises = projects.map(async (project) => {
                    if (project.githubApi && project.repo) {
                        try {
                            const [releaseData, languagesData] = await Promise.all([
                                fetchGitHubReleaseData(project.repo),
                                fetchGitHubLanguages(project.repo)
                            ]);
                            return { project, releaseData, languagesData };
                        } catch (error) {
                            return { project, releaseData: null, languagesData: null };
                        }
                    }
                    return { project, releaseData: null, languagesData: null };
                });
  
                const projectsWithReleases = await Promise.all(githubPromises);
  
                projectsWithReleases.sort((a, b) => {
                    const aDate = a.releaseData?.published_at;
                    const bDate = b.releaseData?.published_at;
                    if (aDate && bDate) return new Date(bDate).getTime() - new Date(aDate).getTime();
                    if (aDate && !bDate) return -1;
                    if (!aDate && bDate) return 1;
                    return 0;
                });
  
                const cardPromises = projectsWithReleases.map(({ project, releaseData, languagesData }) => 
                    createProjectCard(project, releaseData, languagesData)
                );
  
                const projectCards = await Promise.all(cardPromises);
  
                loadingState.style.display = 'none';
  
                projectCards.forEach(card => {
                    projectsGrid.appendChild(card);
                });
  
            } catch (error) {
                loadingState.innerHTML = '<div class="loading-spinner" style="border-color: #ff6b35; border-top-color: #ff6b35;"></div><p style="color: #ff6b35;">Failed to load project information</p>';
            }
        }
  
        // Enhanced Circuit Board Animation System
        class AdvancedCircuitBoard {
            constructor() {
                this.leftSvg = document.querySelector('#circuit-left .circuit-svg');
                this.rightSvg = document.querySelector('#circuit-right .circuit-svg');
                this.scrollIndicator = document.getElementById('scrollIndicator');
                this.isInitialized = false;
                this.lastScrollPercent = 0;
                this.maxLevel = 12;
                this.dataPackets = [];
                this.animationFrame = null;
                this.isVisible = true;
            }
  
            init() {
                if (this.isInitialized) return;
                
                // Set up scroll listener with throttling
                let ticking = false;
                window.addEventListener('scroll', () => {
                    if (!ticking) {
                        window.requestAnimationFrame(() => {
                            this.handleScroll();
                            ticking = false;
                        });
                        ticking = true;
                    }
                }, { passive: true });
  
                // Set up visibility change listener to pause animations when hidden
                document.addEventListener('visibilitychange', () => {
                    this.isVisible = !document.hidden;
                    if (this.isVisible) {
                        this.startDataFlow();
                    } else {
                        this.stopDataFlow();
                    }
                });
  
                // Activate backbones immediately
                this.activateBackbones();
                
                // Start data packet animation
                this.initDataPackets();
                this.startDataFlow();
                
                // Initial scroll check
                this.handleScroll();
                
                this.isInitialized = true;
            }
  
            activateBackbones() {
                const backbones = document.querySelectorAll('.circuit-trace.backbone');
                backbones.forEach(backbone => {
                    backbone.classList.add('active');
                });
            }
  
            initDataPackets() {
                const packets = document.querySelectorAll('.data-packet');
                packets.forEach((packet, index) => {
                    this.dataPackets.push({
                        element: packet,
                        y: 0,
                        speed: 1 + Math.random() * 0.5,
                        delay: index * 200
                    });
                });
            }
  
            startDataFlow() {
                if (this.animationFrame) return;
                
                const animate = (timestamp) => {
                    if (!this.isVisible) {
                        this.animationFrame = null;
                        return;
                    }
  
                    this.dataPackets.forEach(packet => {
                        packet.y += packet.speed;
                        if (packet.y > 1000) {
                            packet.y = 0;
                        }
                        packet.element.setAttribute('cy', packet.y);
                        
                        // Only show packets when scrolled
                        if (this.lastScrollPercent > 0.05) {
                            packet.element.classList.add('flowing');
                        }
                    });
  
                    this.animationFrame = requestAnimationFrame(animate);
                };
  
                this.animationFrame = requestAnimationFrame(animate);
            }
  
            stopDataFlow() {
                if (this.animationFrame) {
                    cancelAnimationFrame(this.animationFrame);
                    this.animationFrame = null;
                }
            }
  
            handleScroll() {
                const scrollY = window.scrollY;
                const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = maxScroll > 0 ? Math.min(scrollY / maxScroll, 1) : 0;
                
                this.lastScrollPercent = scrollPercent;
                
                // Update scroll indicator
                if (this.scrollIndicator) {
                    this.scrollIndicator.style.height = (scrollPercent * 100) + '%';
                }
                
                // Calculate which level to activate (1-12)
                const currentLevel = Math.ceil(scrollPercent * this.maxLevel);
                
                this.updateCircuitElements(currentLevel);
            }
  
            updateCircuitElements(targetLevel) {
                // Activate horizontal traces
                const hTraces = document.querySelectorAll('.circuit-trace.h-trace');
                hTraces.forEach(trace => {
                    const level = parseInt(trace.dataset.level);
                    if (level <= targetLevel) {
                        if (!trace.classList.contains('active')) {
                            trace.classList.add('active');
                            trace.classList.add('glow');
                            setTimeout(() => trace.classList.remove('glow'), 800);
                        }
                    } else {
                        trace.classList.remove('active', 'glow');
                    }
                });
  
                // Activate diagonal traces
                const dTraces = document.querySelectorAll('.circuit-trace.d-trace');
                dTraces.forEach(trace => {
                    const level = parseInt(trace.dataset.level);
                    if (level <= targetLevel) {
                        trace.classList.add('active');
                    } else {
                        trace.classList.remove('active');
                    }
                });
  
                // Activate nodes
                const nodes = document.querySelectorAll('.circuit-node');
                nodes.forEach(node => {
                    const level = parseInt(node.dataset.level);
                    if (level <= targetLevel) {
                        if (!node.classList.contains('active')) {
                            node.classList.add('active');
                            node.classList.add('pulse');
                            setTimeout(() => node.classList.remove('pulse'), 1500);
                        }
                    } else {
                        node.classList.remove('active', 'pulse');
                    }
                });
  
                // Activate IC chips
                const chips = document.querySelectorAll('.circuit-chip');
                chips.forEach(chip => {
                    const level = parseInt(chip.dataset.level);
                    if (level <= targetLevel) {
                        chip.classList.add('active');
                    } else {
                        chip.classList.remove('active');
                    }
                });
  
                // Activate chip pins
                const pins = document.querySelectorAll('.circuit-chip-pin');
                pins.forEach(pin => {
                    const level = parseInt(pin.dataset.level);
                    if (level <= targetLevel) {
                        pin.classList.add('active');
                    } else {
                        pin.classList.remove('active');
                    }
                });
  
                // Activate energy waves at specific levels
                const energyWaves = document.querySelectorAll('.energy-wave');
                energyWaves.forEach((wave, index) => {
                    if (targetLevel >= 5 + index * 3) {
                        wave.classList.add('active');
                    } else {
                        wave.classList.remove('active');
                    }
                });
            }
        }
  
        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            loadProjects();
            
            // Initialize enhanced circuit board
            const circuitBoard = new AdvancedCircuitBoard();
            circuitBoard.init();
        });
  
        // Reduced motion preference
        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            document.documentElement.style.setProperty('--animation-duration', '0.01ms');
        }
    </script>
  </body>
  </html>`;
  
    return new Response(html, {
      headers: {
        'Content-Type': 'text/html; charset=UTF-8',
        'Cache-Control': 'no-cache, no-store, must-revalidate',
        'Pragma': 'no-cache',
        'Expires': '0'
      }
    })
  }
  